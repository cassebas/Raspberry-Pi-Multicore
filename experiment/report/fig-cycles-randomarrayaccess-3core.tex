%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% 3 cores
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{figure}
  \centering
  \begin{tikzpicture}
    \begin{axis}
      [
        ybar,
        xlabel={Alignment pattern --- number of ticks for each core's starting time},
        ylabel={Cycles},
        flexible xticklabels from table={data/cycles-3core-randomarrayaccess.csv}{pattern}{},
        xtick=data,
        x tick label style={rotate=45, anchor=north east, inner sep=0mm},
        % ytick distance=0.25,
        % ymin=0,
        % grid=major,
        bar width=0.2,
        enlarge x limits=0.5,
        legend style={at={(0.28,0.70)},anchor=south east},
        % nodes near coords,
      ]

      \addplot+[]
      plot [
        error bars/.cd,
        y dir = both,
        y explicit,
      ]
      table [
        x expr = \coordindex,
        y expr = \thisrow{median-randomarrayaccess-core0},
        y error expr = \thisrow{std-randomarrayaccess-core0},
      ] {data/cycles-3core-randomarrayaccess.csv};
      \addlegendentry{Core 0}

      \addplot+[]
      plot [
        error bars/.cd,
        y dir = both,
        y explicit,
      ]
      table [
        x expr = \coordindex,
        y expr = \thisrow{median-randomarrayaccess-core1},
        y error expr = \thisrow{std-randomarrayaccess-core1},
      ] {data/cycles-3core-randomarrayaccess.csv};
      \addlegendentry{Core 1}

      \addplot+[]
      plot [
        error bars/.cd,
        y dir = both,
        y explicit,
      ]
      table [
        x expr = \coordindex,
        y expr = \thisrow{median-randomarrayaccess-core2},
        y error expr = \thisrow{std-randomarrayaccess-core2},
      ] {data/cycles-3core-randomarrayaccess.csv};
      \addlegendentry{Core 2}
    \end{axis}
  \end{tikzpicture}
  \caption{Random array access running on 3 cores}
  \label{fig_cycles_randomarrayaccess_3core}
\end{figure}
